<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2336px" preserveAspectRatio="none" style="width:1383px;height:2336px;background:#FFFFFF;" version="1.1" viewBox="0 0 1383 2336" width="1383px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="688" x="346" y="32.9951">VCMI-1.3.2 activity diagram for a server-side incoming LobbyClientConnected packet</text><ellipse cx="386.5" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><path d="M600,98.3149 L600,114.6814 L580,118.6814 L600,122.6814 L600,139.0478 A0,0 0 0 0 600,139.0478 L1069,139.0478 A0,0 0 0 0 1069,139.0478 L1069,108.3149 L1059,98.3149 L600,98.3149 A0,0 0 0 0 600,98.3149 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1059,98.3149 L1059,108.3149 L1069,108.3149 L1059,98.3149 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="606" y="115.3818">Server receives packet</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="606" y="130.4858">pack</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="642" y="130.9818">is an instance of a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="40" x="763" y="130.4858">CPack</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="807" y="130.9818">subclass, eg.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="160" x="894" y="130.4858">LobbyClientConnected</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="387" x="193" y="87.2969"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="168" x="203" y="108.409">pack&#160;=&#160;c-&gt;retrievePack()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="203" y="122.8356">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="203" y="137.2357">CVCMIServer.cpp:424</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="231" x="339" y="136.7778">(CVCMIServer::threadHandleClient)</text><path d="M600,181.0839 L600,197.4503 L580,201.4503 L600,205.4503 L600,221.8167 A0,0 0 0 0 600,221.8167 L1045,221.8167 A0,0 0 0 0 1045,221.8167 L1045,191.0839 L1035,181.0839 L600,181.0839 A0,0 0 0 0 600,181.0839 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1035,181.0839 L1035,191.0839 L1045,191.0839 L1035,181.0839 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="606" y="198.1508">Exists only while processing this packet, but is</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="906" y="198.1508">not</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="937" y="198.1508">specific to it</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="606" y="213.7508">This</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="636" y="213.2547">visitor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="696" y="213.7508">is always an instance of</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="854" y="213.2547">CVCMIServerPackVisitor</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="387" x="193" y="170.0658"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="329" x="203" y="191.1779">CVCMIServerPackVisitor&#160;visitor(*this,&#160;this-&gt;gh)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="203" y="205.6046">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="203" y="220.0047">CVCMIServer.cpp:445</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="231" x="339" y="219.5468">(CVCMIServer::threadHandleClient)</text><rect fill="none" height="1986.3873" style="stroke:#000000;stroke-width:1.5;" width="1361" x="11" y="242.8348"/><path d="M173,242.8348 L173,252.6347 L163,262.6347 L11,262.6347 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="14" lengthAdjust="spacing" textLength="152" x="14" y="256.7987">pack.visit(visitor)</text><path d="M770,298.0685 L770,314.4349 L750,318.4349 L770,322.4349 L770,338.8013 A0,0 0 0 0 770,338.8013 L1138,338.8013 A0,0 0 0 0 1138,338.8013 L1138,308.0685 L1128,298.0685 L770,298.0685 A0,0 0 0 0 770,298.0685 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1128,298.0685 L1128,308.0685 L1138,308.0685 L1128,298.0685 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="776" y="315.6026">NOTE: here the visitor is a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="947" y="315.1065">CVCMIServerPackVisitor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="776" y="330.7354">It's the server's entrypoint for packets</text><rect fill="#F1F1F1" height="77.6004" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="727" x="23" y="279.6347"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="133" x="33" y="300.7468">pack.visit(visitor)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="327" y="301.2047">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="331" y="301.2047">CVCMIServer.cpp:446</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="231" x="467" y="300.7468">(CVCMIServer::threadHandleClient)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="168" x="33" y="315.1469">this.visitBasic(visitor)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="327" y="315.6048">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="331" y="315.6048">NetPacksLib.cpp:45</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="98" x="452" y="315.1469">(CPack::visit)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="189" x="33" y="329.547">visitor.visitForLobby(this)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="327" y="330.0049">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="331" y="330.0049">NetPacksLib.cpp:74</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="189" x="452" y="329.547">(CPackForLobby::visitBasic)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="280" x="33" y="343.9471">handler.handleReceivedPack(packForLobby)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="327" y="344.405">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="331" y="344.405">CVCMIServer.cpp:397</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="273" x="467" y="343.9471">(CVCMIServerPackVisitor::visitForLobby)</text><rect fill="none" height="487.3053" style="stroke:#000000;stroke-width:1.5;" width="1017" x="83" y="367.2351"/><path d="M349,367.2351 L349,377.035 L339,387.035 L83,387.035 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="14" lengthAdjust="spacing" textLength="256" x="86" y="381.1991">apply&#160;=&#160;applier-&gt;getApplier(...)</text><path d="M700,415.0531 L700,431.4195 L680,435.4195 L700,439.4195 L700,455.7859 A0,0 0 0 0 700,455.7859 L1086,455.7859 A0,0 0 0 0 1086,455.7859 L1086,425.0531 L1076,415.0531 L700,415.0531 A0,0 0 0 0 700,415.0531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1076,415.0531 L1076,425.0531 L1086,425.0531 L1076,415.0531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="706" y="432.0911">pack</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="742" y="432.5872">is actually a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="120" x="822" y="432.0911">std::unique_ptr</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="946" y="432.5872">(ie. smart pointer)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="365" x="706" y="447.72">"pack.get()" returns the actual (raw) pointer to the object</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="587" x="93" y="404.035"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="567" x="103" y="425.1471">CBaseForServerApply&#160;*&#160;apply&#160;=&#160;applier-&gt;getApplier(typeList.getTypeID(pack.get()))</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="103" y="439.5738">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="103" y="453.9739">CVCMIServer.cpp:465</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="231" x="239" y="453.516">(CVCMIServer::handleReceivedPack)</text><path d="M574.5,476.804 L574.5,516.3368 L554.5,520.3368 L574.5,524.3368 L574.5,563.8697 A0,0 0 0 0 574.5,563.8697 L1075.5,563.8697 A0,0 0 0 0 1075.5,563.8697 L1075.5,486.804 L1065.5,476.804 L574.5,476.804 A0,0 0 0 0 574.5,476.804 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1065.5,476.804 L1065.5,486.804 L1075.5,486.804 L1065.5,476.804 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="580.5" y="493.842">typeList</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="648.5" y="494.3381">is a</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="242" x="674.5" y="494.3381">registry of unique types and their IDs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="580.5" y="509.9381">(where</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="629.5" y="509.442">type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="665.5" y="509.9381">is the return value of</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="803.5" y="509.442">typeid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="855.5" y="509.9381">from the standard lib)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="580.5" y="525.0709">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="580.5" y="540.6709">This function (</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="72" x="671.5" y="540.1748">getTypeId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="743.5" y="540.6709">) calls itself recursively</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="480" x="580.5" y="555.8037">However, another, non-templated function with the same name will match</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="336" x="218.5" y="488.9523"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="189" x="228.5" y="510.0644">getTypeID(getTypeInfo(ptr))</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="228.5" y="524.4911">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="228.5" y="538.8912">CTypeList.h:146</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="217" x="327.5" y="538.4333">(template&#160;CTypeList::getTypeID)</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="378" x="197.5" y="583.8697"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="224" x="207.5" y="604.9817">ptr&#160;?&#160;&amp;typeid(*ptr)&#160;:&#160;&amp;typeid(T)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="207.5" y="619.4084">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="207.5" y="633.8085">CTypeList.h:188</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="259" x="306.5" y="633.3506">(template&#160;&lt;T&gt;&#160;CTypeList::getTypeInfo)</text><path d="M547.5,669.8567 L547.5,694.0231 L527.5,698.0231 L547.5,702.0231 L547.5,726.1895 A0,0 0 0 0 547.5,726.1895 L988.5,726.1895 A0,0 0 0 0 988.5,726.1895 L988.5,679.8567 L978.5,669.8567 L547.5,669.8567 A0,0 0 0 0 547.5,669.8567 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M978.5,669.8567 L978.5,679.8567 L988.5,679.8567 L978.5,669.8567 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="553.5" y="687.3908">This function (</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="644.5" y="686.8947">getTypeInfo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="732.5" y="687.3908">) ends the recursion above</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="553.5" y="702.9908">It is a non-template function that accepts a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="72" x="834.5" y="702.4947">type_info</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="910.5" y="702.9908">argument</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="553.5" y="718.1236">ie. matches with precedence</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="282" x="245.5" y="666.6386"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="224" x="255.5" y="687.7507">getTypeDescriptor(tinfo)-&gt;typeID</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="255.5" y="702.1774">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="255.5" y="716.5775">CTypeList.cpp:42</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="154" x="363.5" y="716.1195">(CTypeList::getTypeID)</text><path d="M543,739.4076 L543,786.974 L523,790.974 L543,794.974 L543,842.5404 A0,0 0 0 0 543,842.5404 L1090,842.5404 A0,0 0 0 0 1090,842.5404 L1090,749.4076 L1080,739.4076 L543,739.4076 A0,0 0 0 0 543,739.4076 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1080,739.4076 L1080,749.4076 L1090,749.4076 L1080,739.4076 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="549" y="756.9417">The method name</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="672" y="756.4456">getApplier</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="756" y="756.9417">is confusing - *this* is the applier. A better</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="549" y="772.5417">name would be</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="136" x="652" y="772.0456">getPackDerivative</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="792" y="772.5417">as it returns a pointer to a `CPack`</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="549" y="788.1417">derivative (eg.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="160" x="646" y="787.6456">LobbyClientConnected</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="806" y="788.1417">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="549" y="803.2745">&#160;</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="32" x="549" y="818.3784">apps</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="585" y="818.8745">is a registry with a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="120" x="707" y="818.3784">std::unique_ptr</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="831" y="818.8745">objects for each of the 22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="549" y="834.4745">lobby packs as registered by</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="216" x="737" y="833.9784">registerTypesLobbyPacks"&#160;in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="961" y="834.4745">RegisterTypes.h""</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="273" x="250" y="759.5895"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="98" x="260" y="780.7016">apps(ID).get()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="260" y="795.1283">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="260" y="809.5284">CTypeList.h:221</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="154" x="359" y="809.0704">(CApplier::getApplier)</text><rect fill="none" height="1269.9127" style="stroke:#000000;stroke-width:1.5;" width="1341" x="21" y="864.5404"/><path d="M183,864.5404 L183,874.3404 L173,884.3404 L21,884.3404 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="14" lengthAdjust="spacing" textLength="152" x="24" y="878.5044">applyOnServerBefore</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="387" x="193" y="901.3404"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="182" x="203" y="922.4524">apply-&gt;applyOnServerBefore</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="203" y="936.8791">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="203" y="951.2792">CVCMIServer.cpp:466</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="231" x="339" y="950.8213">(CVCMIServer::handleReceivedPack)</text><path d="M610,994.8938 L610,1011.4938 L590,1015.4938 L610,1019.4938 L610,1036.0938 A0,0 0 0 0 610,1036.0938 L1022,1036.0938 A0,0 0 0 0 1022,1036.0938 L1022,1004.8938 L1012,994.8938 L610,994.8938 A0,0 0 0 0 610,994.8938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1012,994.8938 L1012,1004.8938 L1022,1004.8938 L1012,994.8938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="616" y="1012.4279">Compare to</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="696" y="1011.9318">visitor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="756" y="1012.4279">at the top -- here the visitor is different</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="616" y="1028.0279">This will force different behaviour of</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="851" y="1027.5318">pack-&gt;visit</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="407" x="183" y="984.1093"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="364" x="193" y="1005.2214">ClientPermissionsCheckerNetPackVisitor&#160;checker(*srv)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="193" y="1019.6481">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="193" y="1034.0482">CVCMIServer.cpp:83</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="259" x="321" y="1033.5902">(CApplyOnServer::applyOnServerBefore)</text><rect fill="none" height="388.4333" style="stroke:#000000;stroke-width:1.5;" width="1290" x="31" y="1056.8783"/><path d="M193,1056.8783 L193,1066.6782 L183,1076.6782 L31,1076.6782 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="14" lengthAdjust="spacing" textLength="152" x="34" y="1070.8422">pack.visit(checker)</text><path d="M748.5,1104.9119 L748.5,1121.2783 L728.5,1125.2783 L748.5,1129.2783 L748.5,1145.6448 A0,0 0 0 0 748.5,1145.6448 L1248.5,1145.6448 A0,0 0 0 0 1248.5,1145.6448 L1248.5,1114.9119 L1238.5,1104.9119 L748.5,1104.9119 A0,0 0 0 0 748.5,1104.9119 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1238.5,1104.9119 L1238.5,1114.9119 L1248.5,1114.9119 L1238.5,1104.9119 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="754.5" y="1122.446">NOTE: here the visitor is a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="304" x="925.5" y="1121.9499">ClientPermissionsCheckerNetPackVisitor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="479" x="754.5" y="1137.5788">It ensures that the receiver is indeed the server in case of a server packet.</text><rect fill="#F1F1F1" height="63.2003" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="684" x="44.5" y="1093.6782"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="140" x="54.5" y="1114.7903">pack-&gt;visit(checker)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="348.5" y="1115.2482">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="352.5" y="1115.2482">CVCMIServer.cpp:84</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="238" x="480.5" y="1114.7903">(CVCMIServer::applyOnServerBefore)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="168" x="54.5" y="1129.1904">this.visitBasic(visitor)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="348.5" y="1129.6483">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="352.5" y="1129.6483">NetPacksLib.cpp:45</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="98" x="473.5" y="1129.1904">(CPack::visit)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="189" x="54.5" y="1143.5905">visitor.visitForLobby(this)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="348.5" y="1144.0484">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="352.5" y="1144.0484">NetPacksLib.cpp:74</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="189" x="473.5" y="1143.5905">(CPackForLobby::visitBasic)</text><path d="M700,1166.8785 L700,1213.7441 L680,1217.7441 L700,1221.7441 L700,1268.6098 A0,0 0 0 0 700,1268.6098 L1262,1268.6098 A0,0 0 0 0 1262,1268.6098 L1262,1176.8785 L1252,1166.8785 L700,1166.8785 A0,0 0 0 0 700,1166.8785 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1252,1166.8785 L1252,1176.8785 L1262,1176.8785 L1252,1166.8785 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="706" y="1183.9165">result</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="352" x="758" y="1184.4126">is checked later. However, I believe there's a bug here:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="706" y="1200.0126">even if set to</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="40" x="795" y="1199.5165">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="839" y="1200.0126">here, later it may get set to true (before the check)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="706" y="1215.1454">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="445" x="706" y="1230.2782">Also, the function name `isForServer` is confusing here, as it actually</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="706" y="1245.411">checks if the packet is for a</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="37" x="886" y="1245.411">game</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="927" y="1245.411">server (as opposed to lobby server, for example).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="535" x="706" y="1260.5439">A more appropriate name would be "isForGameServer" or "isForGH" (GameHandler)</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="587" x="93" y="1186.3597"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="511" x="103" y="1207.4717">if(pack.isForServer())&#160;{&#160;result&#160;=&#160;srv.isClientHost(pack.c-&gt;connectionID)}</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="103" y="1221.8984">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="178" x="103" y="1236.2985">NetPacksLobbyServer.cpp:25</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="385" x="285" y="1235.8406">(ClientPermissionsCheckerNetPackVisitor::visitForLobby)</text><path d="M749,1278.6098 L749,1310.5762 L729,1314.5762 L749,1318.5762 L749,1350.5426 A0,0 0 0 0 749,1350.5426 L1311,1350.5426 A0,0 0 0 0 1311,1350.5426 L1311,1288.6098 L1301,1278.6098 L749,1278.6098 A0,0 0 0 0 749,1278.6098 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1301,1278.6098 L1301,1288.6098 L1311,1288.6098 L1301,1278.6098 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="755" y="1295.6478">visitTyped</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="839" y="1296.1439">is implemented by the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="987" y="1296.1439">leaf</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1020" y="1296.1439">sub-classes like</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="160" x="1124" y="1295.6478">LobbyClientConnected</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="755" y="1311.2478">visitBasic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="839" y="1311.7439">(called earlier) is implemented by</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="1057" y="1311.7439">mid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1088" y="1311.7439">sub-classes like</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="1192" y="1311.2478">CPackForLobby</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="755" y="1326.8767">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="755" y="1342.4767">The</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="783" y="1341.9806">visitTyped</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234" x="867" y="1342.4767">is not always called: depends on the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="72" x="1105" y="1341.9806">callTyped</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="1181" y="1342.4767">attribute</text><rect fill="#F1F1F1" height="48.8002" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="685" x="44" y="1290.1761"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="168" x="54" y="1311.2882">this.visitTyped(visitor)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="348" y="1311.7461">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="352" y="1311.7461">NetPacksLib.cpp:50</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="98" x="473" y="1311.2882">(CPack::visit)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="280" x="54" y="1325.6883">visitor.visitLobbyClientConnected(*this)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="348" y="1326.1462">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125" x="352" y="1326.1462">NetPacksLib.cpp:679</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="238" x="481" y="1325.6883">(LobbyClientConnected::visitTyped)</text><path d="M752,1389.1271 L752,1397.9271 L732,1401.9271 L752,1405.9271 L752,1414.7271 A0,0 0 0 0 752,1414.7271 L1088,1414.7271 A0,0 0 0 0 1088,1414.7271 L1088,1399.1271 L1078,1389.1271 L752,1389.1271 A0,0 0 0 0 752,1389.1271 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1078,1389.1271 L1078,1399.1271 L1088,1399.1271 L1078,1389.1271 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="758" y="1406.6612">Various sanity checks here, again setting</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="1025" y="1406.1651">result</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="691" x="41" y="1370.5426"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="84" x="51" y="1391.6547">result&#160;=&#160;...</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="51" y="1406.0814">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="198" x="51" y="1420.4815">NetPacksLobbyServer.cpp:40:73</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="469" x="253" y="1420.0236">(ClientPermissionsCheckerNetPackVisitor::visitLobbyClientConnected)</text><rect fill="#F1F1F1" height="34.4001" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="334.5" y="1511.7114"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="84" x="344.5" y="1532.8235">return&#160;false</text><polygon fill="#F1F1F1" points="320,1465.3116,453,1465.3116,465,1478.5115,453,1491.7114,320,1491.7114,308,1478.5115,320,1465.3116" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="monospace" font-size="11" lengthAdjust="spacing" textLength="133" x="320" y="1475.4975">checker.getResult()</text><text fill="#808080" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="320" y="1489.1171">CVCMIServer.cpp:86</text><text fill="#808080" font-family="monospace" font-size="11" lengthAdjust="spacing" textLength="14" x="439" y="1488.6974">()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="465" y="1475.9172">true</text><path d="M610,1591.3295 L610,1615.496 L590,1619.496 L610,1623.496 L610,1647.6624 A0,0 0 0 0 610,1647.6624 L1200,1647.6624 A0,0 0 0 0 1200,1647.6624 L1200,1601.3295 L1190,1591.3295 L610,1591.3295 A0,0 0 0 0 610,1591.3295 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1190,1591.3295 L1190,1601.3295 L1200,1601.3295 L1190,1591.3295 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="616" y="1608.8636">Compare this visitor (named</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="803" y="1608.3675">applier</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="863" y="1608.8636">this time) to the previous</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="64" x="1029" y="1608.3675">visitors</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="1097" y="1608.8636">above</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="616" y="1624.4636">Once again,</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="128" x="696" y="1623.9676">pack-&gt;visit(...)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="828" y="1624.4636">will be called, but since it has different implementations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="389" x="616" y="1639.5965">for the different visitor types, the behaviour will be different.</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="407" x="183" y="1588.1115"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="287" x="193" y="1609.2236">ApplyOnServerNetPackVisitor&#160;applier(*srv)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="193" y="1623.6503">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="193" y="1638.0504">CVCMIServer.cpp:89</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="259" x="321" y="1637.5924">(CApplyOnServer::applyOnServerBefore)</text><rect fill="none" height="378.8037" style="stroke:#000000;stroke-width:1.5;" width="1318" x="34" y="1660.8804"/><path d="M196,1660.8804 L196,1670.6804 L186,1680.6804 L34,1680.6804 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="monospace" font-size="14" lengthAdjust="spacing" textLength="152" x="37" y="1674.8444">pack.visit(applier)</text><path d="M748,1690.6804 L748,1738.0132 L728,1742.0132 L748,1746.0132 L748,1793.346 A0,0 0 0 0 748,1793.346 L1342,1793.346 A0,0 0 0 0 1342,1793.346 L1342,1700.6804 L1332,1690.6804 L748,1690.6804 A0,0 0 0 0 748,1690.6804 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1332,1690.6804 L1332,1700.6804 L1342,1700.6804 L1332,1690.6804 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="754" y="1708.2145">NOTE: here the visitor is a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="216" x="925" y="1707.7184">ApplyOnServerNetPackVisitor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="323" x="754" y="1723.3473">It is the core processing unit for the server packet.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="754" y="1738.4801">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="462" x="754" y="1754.0801">For some visitors, there's a only the dummy (empty) implementation of</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="1220" y="1753.584">visitForLobby</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="754" y="1769.6801">as defined by the base visitor class:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="104" x="989" y="1769.184">ICPackVisitor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1093" y="1769.6801">, defined in</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="128" x="1168" y="1769.184">NetPackVisitor.h</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="754" y="1785.2801">(this is the case for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="216" x="881" y="1784.784">ApplyOnServerNetPackVisitor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1101" y="1785.2801">- its logic is in</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="80" x="1191" y="1784.784">visitTyped</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="1275" y="1785.2801">instead)</text><rect fill="#F1F1F1" height="63.2003" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="683" x="45" y="1710.413"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="140" x="55" y="1731.5251">pack-&gt;visit(applier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="349" y="1731.9831">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="353" y="1731.9831">CVCMIServer.cpp:91</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="238" x="480" y="1731.5251">(CVCMIServer::applyOnServerBefore)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="168" x="55" y="1745.9252">this.visitBasic(visitor)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="349" y="1746.3832">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="353" y="1746.3832">NetPacksLib.cpp:45</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="98" x="474" y="1745.9252">(CPack::visit)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="189" x="55" y="1760.3253">visitor.visitForLobby(this)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="349" y="1760.7833">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="353" y="1760.7833">NetPacksLib.cpp:74</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="189" x="474" y="1760.3253">(CPackForLobby::visitBasic)</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="349" x="212" y="1813.346"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="14" x="222" y="1834.4581">{}</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="222" y="1848.8848">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="115" x="222" y="1863.2849">NetPackVisitor.h:22</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="210" x="341" y="1862.827">(ICPackVisitor::visitForLobby)</text><rect fill="#F1F1F1" height="48.8002" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="685" x="44" y="1896.115"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="168" x="54" y="1917.2271">this.visitTyped(visitor)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="348" y="1917.685">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="352" y="1917.685">NetPacksLib.cpp:50</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="98" x="473" y="1917.2271">(CPack::visit)</text><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="280" x="54" y="1931.6272">visitor.visitLobbyClientConnected(*this)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="348" y="1932.0851">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125" x="352" y="1932.0851">NetPacksLib.cpp:679</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="238" x="481" y="1931.6272">(LobbyClientConnected::visitTyped)</text><path d="M716.5,1968.6004 L716.5,1992.2997 L696.5,1996.2997 L716.5,2000.2997 L716.5,2023.9989 A0,0 0 0 0 716.5,2023.9989 L1099.5,2023.9989 A0,0 0 0 0 1099.5,2023.9989 L1099.5,1978.6004 L1089.5,1968.6004 L716.5,1968.6004 A0,0 0 0 0 716.5,1968.6004 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1089.5,1968.6004 L1089.5,1978.6004 L1099.5,1978.6004 L1089.5,1968.6004 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="722.5" y="1985.6673">Finally, the core processing logic for this packet</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="362" x="722.5" y="2000.8002">In this case, registers the new client, restores a previous</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351" x="722.5" y="2015.933">state if this is a re-connect after a lost connection, etc.</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="620" x="76.5" y="1964.9152"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="21" x="86.5" y="1986.0273">...</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="86.5" y="2000.454">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="204" x="86.5" y="2014.8541">NetPacksLobbyServer.cpp:75:110</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="392" x="294.5" y="2014.3961">(ApplyOnServerNetPackVisitor::visitLobbyClientConnected)</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="407" x="183" y="2059.6841"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="182" x="193" y="2080.7962">return&#160;applier.getResult()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="193" y="2095.2229">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="124" x="193" y="2109.623">CVCMIServer.cpp:93</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="259" x="321" y="2109.1651">(CApplyOnServer::applyOnServerBefore)</text><path d="M600,2173.0376 L600,2181.8376 L580,2185.8376 L600,2189.8376 L600,2198.6376 A0,0 0 0 0 600,2198.6376 L970,2198.6376 A0,0 0 0 0 970,2198.6376 L970,2183.0376 L960,2173.0376 L600,2173.0376 A0,0 0 0 0 600,2173.0376 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M960,2173.0376 L960,2183.0376 L970,2183.0376 L960,2173.0376 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="606" y="2190.5717">appended to a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="208" x="703" y="2190.0756">CVCMIServer-&gt;announceQueue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="915" y="2190.5717">(a list)</text><rect fill="#F1F1F1" height="62.769" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="387" x="193" y="2154.4531"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="329" x="203" y="2175.5652">if&#160;(result)&#160;addToAnnounceQueue(std::move(pack))</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="203" y="2189.9919">&#160;</text><text fill="#808080" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="132" x="203" y="2204.392">CVCMIServer.cpp:467</text><text fill="#808080" font-family="monospace" font-size="12" lengthAdjust="spacing" textLength="231" x="339" y="2203.934">(CVCMIServer::handleReceivedPack)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="306" y="2249.222"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141" x="316" y="2270.3607">(repeat with next pack)</text><ellipse cx="386.5" cy="2314.1908" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="386.5" cy="2314.1908" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="67.2969" y2="87.2969"/><polygon fill="#181818" points="382.5,77.2969,386.5,87.2969,390.5,77.2969,386.5,81.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="150.0658" y2="170.0658"/><polygon fill="#181818" points="382.5,160.0658,386.5,170.0658,390.5,160.0658,386.5,164.0658" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="466.804" y2="488.9523"/><polygon fill="#181818" points="382.5,478.9523,386.5,488.9523,390.5,478.9523,386.5,482.9523" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="551.7213" y2="583.8697"/><polygon fill="#181818" points="382.5,573.8697,386.5,583.8697,390.5,573.8697,386.5,577.8697" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="646.6386" y2="666.6386"/><polygon fill="#181818" points="382.5,656.6386,386.5,666.6386,390.5,656.6386,386.5,660.6386" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="729.4076" y2="759.5895"/><polygon fill="#181818" points="382.5,749.5895,386.5,759.5895,390.5,749.5895,386.5,753.5895" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="357.2351" y2="404.035"/><polygon fill="#181818" points="382.5,394.035,386.5,404.035,390.5,394.035,386.5,398.035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="964.1093" y2="984.1093"/><polygon fill="#181818" points="382.5,974.1093,386.5,984.1093,390.5,974.1093,386.5,978.1093" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#808080;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="386.5" x2="386.5" y1="1156.8785" y2="1186.3597"/><polygon fill="#808080" points="382.5,1176.3597,386.5,1186.3597,390.5,1176.3597,386.5,1180.3597" style="stroke:#808080;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1249.1286" y2="1290.1761"/><polygon fill="#181818" points="382.5,1280.1761,386.5,1290.1761,390.5,1280.1761,386.5,1284.1761" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1338.9763" y2="1370.5426"/><polygon fill="#181818" points="382.5,1360.5426,386.5,1370.5426,390.5,1360.5426,386.5,1364.5426" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1046.8783" y2="1093.6782"/><polygon fill="#181818" points="382.5,1083.6782,386.5,1093.6782,390.5,1083.6782,386.5,1087.6782" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1491.7114" y2="1511.7114"/><polygon fill="#181818" points="382.5,1501.7114,386.5,1511.7114,390.5,1501.7114,386.5,1505.7114" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="465" x2="477" y1="1478.5115" y2="1478.5115"/><polygon fill="#181818" points="473,1515.3115,477,1525.3115,481,1515.3115,477,1519.3115" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="477" x2="477" y1="1478.5115" y2="1568.1115"/><line style="stroke:#181818;stroke-width:1.0;" x1="477" x2="386.5" y1="1568.1115" y2="1568.1115"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1568.1115" y2="1588.1115"/><polygon fill="#181818" points="382.5,1578.1115,386.5,1588.1115,390.5,1578.1115,386.5,1582.1115" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1433.3116" y2="1465.3116"/><polygon fill="#181818" points="382.5,1455.3116,386.5,1465.3116,390.5,1455.3116,386.5,1459.3116" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1773.6133" y2="1813.346"/><polygon fill="#181818" points="382.5,1803.346,386.5,1813.346,390.5,1803.346,386.5,1807.346" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1876.115" y2="1896.115"/><polygon fill="#181818" points="382.5,1886.115,386.5,1896.115,390.5,1886.115,386.5,1890.115" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#808080;stroke-width:1.5;stroke-dasharray:1.0,3.0;" x1="386.5" x2="386.5" y1="1944.9152" y2="1964.9152"/><polygon fill="#808080" points="382.5,1954.9152,386.5,1964.9152,390.5,1954.9152,386.5,1958.9152" style="stroke:#808080;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="1650.8804" y2="1710.413"/><polygon fill="#181818" points="382.5,1700.413,386.5,1710.413,390.5,1700.413,386.5,1704.413" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="2027.6841" y2="2059.6841"/><polygon fill="#181818" points="382.5,2049.6841,386.5,2059.6841,390.5,2049.6841,386.5,2053.6841" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="822.3585" y2="901.3404"/><polygon fill="#181818" points="382.5,891.3404,386.5,901.3404,390.5,891.3404,386.5,895.3404" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="2122.4531" y2="2154.4531"/><polygon fill="#181818" points="382.5,2144.4531,386.5,2154.4531,390.5,2144.4531,386.5,2148.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="232.8348" y2="279.6347"/><polygon fill="#181818" points="382.5,269.6347,386.5,279.6347,390.5,269.6347,386.5,273.6347" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="2217.222" y2="2249.222"/><polygon fill="#181818" points="382.5,2239.222,386.5,2249.222,390.5,2239.222,386.5,2243.222" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="386.5" y1="2283.1908" y2="2303.1908"/><polygon fill="#181818" points="382.5,2293.1908,386.5,2303.1908,390.5,2293.1908,386.5,2297.1908" style="stroke:#181818;stroke-width:1.0;"/><!--SRC=[xLbRRnkv5NxNhpZB6jqPHPBNZXCdaqI5rzvj3AIRD3NoqXORQeQIsCoj92L72FBVUyuXPpII9SLUj7qewWTR8ddkju-q_QJBMXfPGAQcSf6x6_NPNUHwLXQgT93YBsLwFQTTha1ykFpJzV1az7Xq2Z9rUgdT2Z8jPqG_hGn8iCeibHbQdIdGPLeLkfp1cseoMLtc6fbTLcMfKgSog6NwIJdHwtrNcofLsS8eE2ghJ4L7AVuUmD5Kv_GdroL_MvHn3o0HWlS5KWAyd5QaPPLNvfL0DLPYp6G9Ku4G4TC9yVAOJevVzBvJPTOAHE6uZPPK9HnPaqP7UPK6MM2KMvWIH5S6YHYBHtJiaG3no6ycHLLM5WrIsJZ2NIH_9E8WKdHb53OwSf_T5lCkFPBZWKUYfUxPDaHNkqAKgwd3GquQr_F-4-HQU0NfS8nYZ5PBzGvNebWCG5nI3F_2KHgbTOrBPwTdc-j9ukP6oUorBBDS-RY9k5TMJe7Hixdh-NDeHAhqKjaGovvWoKA0jY1BZ3zgLQOAgYbcXX2Nx_okNKpIN5ex03KRuVgkzC3mOg20PFOQipeg4gSFscg7IRVqVwE-cslaIR-7uzbydxLdJnvgxK-VjNKMgZ9VmUqSimiuWQobt2PnmVu1J1QERE_taRhV1rkhL4zr2gu2xNetT5I8e6zmKtuhLtUy9VROkk4Lp0aiooQjsFKZvXq52R68uOilcHsRiFi7rU9As7PTSdRsLDpBSyI3lEBb_IYjJWy8RUNzeXnPQj_eYPVtXCNHMf8mVU0TU7dsFrU6qoSYYV5zUP-VjRmR1a46gni4pTakC_9_t_japxYKwWvbVC1fZv-VRpcj4yqWik4ZuXVKqZg91_3BsvkV4fWhx8rkhffKvyGvb2G0r-vxooI-8UCN38vPrPN6ba6jsgUinQFhZ0BOoYbPrvZphu3-Qcphuvbo5_vpD1gDcWG3Q2eKtQVG7g_J1LFtuH0NjwhL6ool4QxTuEVhA_OjVOtYU5yDFxrJmtTZn47SSYT5gjEYKhUGEQf6lhGkIv95gV-vKB_MZgepqce4ja2F0BjD6SzHh1KKeOzxLtj-41bv6pSaLFgqLqt-WNsDwRl-RZstDh_vL4wh21K9FhXf_3J7hoTdJt7DgQBE9LhNRYP9osQVzOs_WmVW-DYe6NutA-extdwWGzIJCb9T6xY-iiV7p22wvLpqV3mFiYvCiwNC5w5_qRx6BWvJKnK-4R6xPT9aaEj9x6tdXjWEnqYqNa3265ACZSM-QLK-fL6pC1PZcw-Oz7LrYsFD353B2hdZXx8gXurBiZNNM-tcNhui59JqwrRdEHJIfVFzyK3Fmn_WzzwCg4-1WAJzVhChAC-UTOFoycQyAp0OLH7lYloLigdHDGqof_5KF1mx7yaDISt8xYv-C-nx_KpQeAVH0qqSsSjuI4wgfMBYQ-SpfUlVDJCtbmuJFrMryps9bFvLCsEGPhOWZC9yg9hOwPXQ79IQu4EcSEJj3mEs31jTNyMXtEuu_VJqXDP2Ds57XC_xFA6WK6vUPJuLs1KD1QTpMfNJ1K_s8J2Yw3T97jhN22vWeXp1OXR06LKjyWnNFJ_gFbVAwAL4Y4nL8YcDsrOXkxr1maSUGn-PMTPIGNG86uKC4koVffJRGcRlxkvflWrPdW1AfdCgLhBjz9GPvYIDHuCbfJr7B7YqRONyckyK0ikQyLH5-OXanVlkBaP7R8OLuEk-2VEsz6tyHuLwgUsXmaU6urqdzqo7f_UQ3Xk3YptyJfb2Myf_UpbNE1zD00uDr4pzQjItPhbdDZrxt2HagsoIxBHoLtvULWKwI55cT84YrXX5oLKr38SxuK2cfrDSBZi5psqEHI6aR7SnH-TogQk5yMsQGZqSUtGbTfJXVemPNB6602tE3FpQ4m_4cS_Exi3C_Uxxps9DJ_FVm9ilUa7SLZvy4m7UAsz3QBcNgzBYnTVwnXrwFbK5izHbfbJMmOrKsIbYEd-52siUEeu2pys40HZ-zNTqInva5VR8xE_3SRCHIarFFSBJjWMAYFJW2ofYyNABE16B2tUzQQyhw_nvlCsclWEYdJWIlf9BMqUJIpVgy9GXuhtSSmU7xmq6jK1ICemAPeQ01YSYZeKMabnZbULqwoP76lKzXMgoc74GayPhIuLNlYcwrFbYdyhSqgoWGmFFaeP68LU08wKvvmm2h6Z29S1XOXrQXIzoMmrulHtGF9y-TfpzSNFAUNb-GZM0E71ZtfQq98u-waJiNtgEZsV8-lYuoOe8ULHrNLbAe2gC4hytyFFciqJqeE8cSIwW82kmk4rL6qsmOckOijP_n3MlEOulqoo-HdnEE_xkQU8zoPXqsmCDfkotj8SdFzotFUmQr_vX8Zx0_-dvSnAmYpZ8OzKFjOcWXp_7sQd9sOI-_FIc4FRxkP9JUfXOJ8Ry18ED8DUVrFv7c0tklbcXvmcQ8rib3I6YU8UuVh_GsMv96stGF-CrqEok5MXeyqRYXIO8ace6h8m-YOOs6XBfdD6JXLDx4Y8qeRRNu2tsS1yHPpyavu_5Gvl9JdV6-wBtGHgSoHRlA2KzgOR22wKvazY4iVuTbUkw0sqRI5- -UZEnOX7aX_bBqFazqo205dyhzqnTVjmHs8ZHf-MwUiBDBdId5s7Z4qABHZvkG4HzAMxmWvvkOAiDBBG5g0AcFWYedlzR01KXecPuHjHdCW-V0_BdVQSB5JStThoUB3aeROaJqbxVYzxIMnq7Px09fFpBYF3u2zkOprl_E8Wj5wcmrSvb1xEjYqTIpxRCdrecwR4-rQZFrtFVvjTmhf7M7Xyz2Cu5Jno0Sys91yAvvoV_XtFtXdC7IgMBuSA5DANnsNcAnfkUQzDc2wi5ObGNR5MqWdqQ1Op23zoSSekYME4DjAZTAjvAJdzls0HCZMgKqsggo_N4cH1sR8paEP0WzVNbXc63behlaPjsjnT900vIQpnn9cE_uJMynckyyERLJASUujwPCYNUMcKM7vuONxfuSwqRFK7W-eP5U_7a_oeQ-HRa__QGFN-Id9omNGU2-Pj6wy-w94Wxs5anFYjyoRJ_ncdghFIBb6Y3zYd49r-fRZ6RIGFQiQYRudUTC3821-i8qp9yzdbBRpJ3S8a1EIM8Br47I_zTR6us0r0k7HqOxYs2uS7SF4frX_pECVhy8UyIBAgzhq7aCKSCCijkgekohF1seVwyK0iLyHjJWKEHRsdxN-pFx_icin51L11zu6yKM__n68vbLn62fUXC35BS_P_6rrw2sjSABxlyB5QgpuxZZDcBSQl_1G00]--></g></svg>